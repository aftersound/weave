{
    "extensions": [
        {
            "group": "COMPONENT_FACTORY",
            "baseType": "io.aftersound.weave.component.ComponentFactory",
            "types": [
                "io.aftersound.weave.common.FileBasedExtensionRegistryFactory",
                "io.aftersound.weave.concurrent.ThreadPoolExecutorFactory"
            ]
        },
        {
            "group": "VALUE_FUNC_FACTORY",
            "baseType": "io.aftersound.weave.common.ValueFuncFactory",
            "types": [
                "io.aftersound.weave.jackson.BsonValueFuncFactory",
                "io.aftersound.weave.jackson.JacksonValueFuncFactory",
                "io.aftersound.weave.jackson.SmileValueFuncFactory",
                "io.aftersound.weave.service.request.ParamValueFuncFactory",
                "io.aftersound.weave.slf4j.Slf4jValueFuncFactory",
                "io.aftersound.weave.value.CommonValueFuncFactory"
            ]
        },
        {
            "group": "RATE_LIMIT_EVALUATOR",
            "baseType": "io.aftersound.weave.service.rl.RateLimitEvaluator",
            "types": [
            ]
        },
        {
            "group": "SERVICE_EXECUTOR",
            "baseType": "io.aftersound.weave.service.ServiceExecutor",
            "types": [
                "io.aftersound.weave.beam.BeamFlinkPipelineServiceExecutor"
            ]
        }
    ],
    "components": [
        {
            "type": "FileBasedExtensionRegistry",
            "id": "beam.extension.registry",
            "options": {
                "directory": "/opt/weave/lib/beam/",
                "file": "_extensions.json"
            }
        },
        {
            "type": "ThreadPoolExecutor",
            "id": "weave.thread.pool.executor",
            "options": {
            }
        }
    ],
    "services": [
        {
            "methods": [
                "POST"
            ],
            "path": "/pipeline/run",
            "paramFields": [
                {
                    "name": "p1",
                    "type": "String",
                    "multiValued": false,
                    "paramType": "Path",
                    "constraint": {
                        "type": "Required"
                    }
                },
                {
                    "name": "p2",
                    "type": "String",
                    "multiValued": false,
                    "paramType": "Path",
                    "constraint": {
                        "type": "Required"
                    }
                },
                {
                    "name": "pipelineRequest",
                    "type": "Map",
                    "valueFunc": "JACKSON:CONVERT(InputStream,java.util.Map)",
                    "multiValued": false,
                    "paramType": "Body",
                    "constraint": {
                        "type": "Required"
                    }
                }
            ],
            "executionControl": {
                "type": "BeamFlinkPipelineService",
                "extensionRegistry": "beam.extension.registry",
                "concurrentExecutorService": "weave.thread.pool.executor",
                "libraryListFile": "/opt/weave/lib/beam/_library.json"
            }
        }
    ]
}