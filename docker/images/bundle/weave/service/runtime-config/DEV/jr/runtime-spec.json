{
    "info": {
        "title": "Job Runner",
        "description": "Job Runner maintains heartbeat with connected Job Manager and runs jobs as commanded/instructed by Job Manager",
        "contact": {
            "email": "aftersound@gmail.com"
        },
        "version": "1.0.0"
    },
    "extensions": [
        {
            "group": "COMPONENT_FACTORY",
            "baseType": "io.aftersound.weave.component.ComponentFactory",
            "types": [
                "io.aftersound.weave.job.runner.AgentFactory"
            ]
        },
        {
            "group": "VALUE_FUNC_FACTORY",
            "baseType": "io.aftersound.weave.common.ValueFuncFactory",
            "types": [
                "io.aftersound.weave.jackson.BsonValueFuncFactory",
                "io.aftersound.weave.jackson.JacksonValueFuncFactory",
                "io.aftersound.weave.jackson.SmileValueFuncFactory",
                "io.aftersound.weave.service.request.ParamValueFuncFactory",
                "io.aftersound.weave.slf4j.Slf4jValueFuncFactory",
                "io.aftersound.weave.value.CommonValueFuncFactory"
            ]
        },
        {
            "group": "SERVICE_EXECUTOR",
            "baseType": "io.aftersound.weave.service.ServiceExecutor",
            "types": [
                "io.aftersound.weave.job.RunnerAgentServiceExecutor"
            ]
        }
    ],
    "components": [
        {
            "type": "JobRunnerAgent",
            "id": "job.runner.agent",
            "options": {
                "runner.capability": "{\"type\":\"ApacheFlinkJobSubmission\",\"apacheFlinkVersion\":\"1.13.5\"}",
                "total.slots": 20,
                "job.manager": "${WEAVE_JOB_MANAGER}"
            }
        }
    ],
    "services": [
        {
            "methods": [
                "GET"
            ],
            "path": "/runner/capability",
            "paramFields": [
                {
                    "name": "path1",
                    "type": "String",
                    "multiValued": false,
                    "paramType": "Path",
                    "constraint": {
                        "type": "Required"
                    }
                },
                {
                    "name": "path2",
                    "type": "String",
                    "multiValued": false,
                    "paramType": "Path",
                    "constraint": {
                        "type": "Required"
                    }
                },
                {
                    "name": "operation",
                    "type": "String",
                    "multiValued": false,
                    "paramType": "Predefined",
                    "valueFunc": "STR(get_capability)",
                    "constraint": {
                        "type": "Required"
                    }
                }
            ],
            "executionControl": {
                "type": "RunnerAgentService"
            }
        },
        {
            "methods": [
                "GET"
            ],
            "path": "/runner/capacity",
            "paramFields": [
                {
                    "name": "path1",
                    "type": "String",
                    "multiValued": false,
                    "paramType": "Path",
                    "constraint": {
                        "type": "Required"
                    }
                },
                {
                    "name": "path2",
                    "type": "String",
                    "multiValued": false,
                    "paramType": "Path",
                    "constraint": {
                        "type": "Required"
                    }
                },
                {
                    "name": "operation",
                    "type": "String",
                    "multiValued": false,
                    "paramType": "Predefined",
                    "valueFunc": "STR(get_capacity)",
                    "constraint": {
                        "type": "Required"
                    }
                }
            ],
            "executionControl": {
                "type": "RunnerAgentService"
            }
        }
    ]
}